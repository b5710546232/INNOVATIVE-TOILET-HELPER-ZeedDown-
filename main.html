<!DOCTYPE html>
<html lang="en">

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">

    <title>Exceed12-ZeedDownGroup</title>

    <!-- Bootstrap Core CSS -->
    <link href="css/bootstrap.min.css" rel="stylesheet">

    <!-- Custom CSS -->
    <link href="css/agency.css" rel="stylesheet">
    <!-- Custom Fonts -->
    <link href="font-awesome/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css">
    <link href='https://fonts.googleapis.com/css?family=Kaushan+Script' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700' rel='stylesheet' type='text/css'>

</head>

<body id="page-top" class="index">
    <!-- Header -->
    <header>
        <div class="container">
            <div class="intro-text">
               <div class="col-md-12">
                <div class="intro-lead-in" style="font-size:42px;"><font color="black">ZeedDownGroup</font></div>
                </div>
                <div class="col-md-12">
                <div class="intro-heading"><font color="black">Innovative Toilet Helper</font></div>
                </div>
            </div>
            <div class="row">
               <div class="col-md-12">
                <a href="#project" class="btn btn-circle page-scroll">
                            <i class="fa fa-angle-double-down animated"></i>
                        </a>
            </div>
            </div>
    </header>
    <!-- Project Section -->
    <section id="project">
        <div class="container">
            <p><h1><b>ProJect</b></h1></p>
            <div class="row text-center">
                <h1><span class="label label-info" id="title">Server Monitor</span><span class="label label-success" id="status">STANDBY</span><span class="label label-primary" id="btn">DONE</span></h1>
            </div>
            <div class="row">
                <button type="button" id="re1" class="btn btn-danger">1</button>
                <button type="button" id="re2" class="btn btn-default">2</button>
                <button type="button" id="re3" class="btn btn-warning">3</button>
                <button type="button" id="re4" class="btn btn-success">Done</button>
            </div>
        </div>
        <div class="row text-center">
            <h4><div id="monitorLog">
                <div class="row"></div>
            </div></h4>
            <!--img src="img/DSC_0001.jpg"-->
        </div>
    </section>

    <!-- About Project Section -->
    <section id="portfolio" class="bg-light-gray">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h2 class="<section-heading></section-heading>" >About our project</h2>
                    <h4 class="section-subheading text-muted">Help every problem in the toilet</h4>
                </div>
            </div>
               <div class="row" style="margin-top:30px;">
                <div class="col-lg-12">
                    <span class="label label-default" style="font-size:18px;">• First button can call maid .If you want tissue or other help.</span>
                </div>
                <div class="row" style="margin-top:60px;margin-left:2px">
                <div class="col-lg-12">
                    <span class="label label-default" style="font-size:18px;">• Second button can call mechanic .If you want to fix something.</span>
                </div>
            </div>
            <div class="row" style="margin-top:35px;margin-left:2px">
                <div class="col-lg-12">
                    <span class="label label-default" style="font-size:18px;">• Third button can call hospital .If you have emergency.</span>
                </div>
            </div>
            <div class="row" style="margin-top:35px;margin-left:2px">
                <div class="col-lg-12">
                    <span class="label label-default" style="font-size:18px;">• Can shout to this machine to call someone help you.If you have emergency and cannot touch the machine</span>
                </div>
            </div>
            <div class="row" style="margin-top:35px;margin-left:2px">
                <div class="col-lg-12">
                    <span class="label label-default" style="font-size:18px;">• We have gas detector to detect disguised gas</span>
                </div>
            </div>
        </div>
        <div class="row" style="margin-top:150px;margin-left:880px">
            <blockquote>
                <p><b>Toilet is the most happiness place for everyone</b></p>
  <small>My friend said</small>
</blockquote>
        </div>
    </section>

    <!-- About Section -->
    <section id="about">
        <div class="container">
            <div class="row">
                <div class="col-lg-12 text-center">
                    <h1 class="section-heading"> Thank you for visiting </h1>
                    <h3 class="section-subheading text-muted">I love u jubjub </h3>
                </div>
            </div>
            
        </div>
    </section>
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <span class="copyright">Copyright &copy; ExceedCamp12-ZeedDownGroup</span>
                </div>
            </div>
        </div>
    </footer>

    <!-- jQuery -->
    <script src="js/jquery.js"></script>
    <script>
            detector.
            var state = {
                IDLE: 0,
                WORKINPROGRESS: 1
            }
            
            var receivedCase = {
                NORMAL: 0,
                CALLFORHELP: 1,
                NEEDJANITOR: 2,
                NEEDREPAIRATION: 3,
                DETECTSOUND: "S",
                DETECTGAS: "G",
                DONE: 4
            }
            
            var record = {
                CALLFORHELP: 0,
                NEEDJANITOR: 0,
                NEEDREPAIRATION: 0
            }
            
            var currentState = state.IDLE;
            var receivedData;
            var input = $("#input");
            var button = $("#button");
            var status = $("#status");
//            console.log(status);
        
        
            function onClicked() {
                var message = input.val();
                console.log( message );
                
                $("#monitorLog").append("<div class='alert alert-success role='alert' id='alertMessage'>"+message+"<button type='button' id='closebtn' align='right' class=btn btn-danger'><span class='glyphicon glyphicon-remove-sign' aria-hidden='true'></span></button></div>");
                
                var closebtn = $("#closebtn");
                var alertLine = $("#alertMessage");
                
                closebtn.click( function() {
                    $("#alertMessage").parentNode.remove();
                } );
            }
            
            function addAlertMessage( message, type ) {
                
                var currentTime = new Date();
                var hours = currentTime.getHours();
                if( hours < 10) hours = "0"+hours;
                var minutes = currentTime.getMinutes();
                if( minutes < 10) minutes = "0"+minutes;
                var seconds = currentTime.getSeconds();
                if( seconds < 10) seconds = "0"+seconds;
                
                var time = "Time: "+hours+":"+minutes+":"+seconds;
                
                if( type == 1 ) $("#monitorLog").prepend("<div class='panel panel-danger' text-align='left' id='alertMessage'><div class='panel-heading '>"+message+"</div><div class='panel-body'>"+time+"<button type='button' id='closebtn' align='right' class=btn btn-danger'><span class='glyphicon glyphicon-remove-sign' aria-hidden='true'></span></button></div>");
                else if( type == 2 ) $("#monitorLog").prepend("<div class='panel panel-info' text-align='left' id='alertMessage'><div class='panel-heading '>"+message+"</div><div class='panel-body'>"+time+"<button type='button' id='closebtn' align='right' class=btn btn-danger'><span class='glyphicon glyphicon-remove-sign' aria-hidden='true'></span></button></div>");
                else if( type == 3 ) $("#monitorLog").prepend("<div class='panel panel-success' text-align='left' id='alertMessage'><div class='panel-heading '>"+message+"</div><div class='panel-body'>"+time+"<button type='button' id='closebtn' align='right' class=btn btn-danger'><span class='glyphicon glyphicon-remove-sign' aria-hidden='true'></span></button></div>");
                else if( type == 4 ) $("#monitorLog").prepend("<div class='panel panel-warning' text-align='left' id='alertMessage'><div class='panel-heading '>"+message+"</div><div class='panel-body'>"+time+"<button type='button' id='closebtn' align='right' class=btn btn-danger'><span class='glyphicon glyphicon-remove-sign' aria-hidden='true'></span></button></div>");
                else if( type == 5 ) $("#monitorLog").prepend("<div class='panel panel-warning' text-align='left' id='alertMessage'><div class='panel-heading '>"+message+"</div><div class='panel-body'>"+time+"<button type='button' id='closebtn' align='right' class=btn btn-danger'><span class='glyphicon glyphicon-remove-sign' aria-hidden='true'></span></button></div>");
                
                var closebtn = $("#closebtn");
                var alertLine = $("#alertMessage");
                
                closebtn.on('click', function() {
                    alertLine.remove() ;
                } );
                
            }
            
            function handleReceivedRequest( request ) {
                if( request == receivedCase.CALLFORHELP ) addAlertMessage( "REQUEST: Call For Help", 1 );
                else if( request == receivedCase.NEEDJANITOR ) addAlertMessage( "REQUEST: Need Janitor", 2 );
                else if( request == receivedCase.NEEDREPAIRATION ) addAlertMessage( "REQUEST: Maintainance", 3 );
                else if( request == receivedCase.DETECTGAS ) addAlertMessage( "REQUEST: Detected Gas", 4 );
                else if( request == receivedCase.DETECTSOUND ) addAlertMessage( "REQUEST: Detected Sound", 5 );
            }
            
            function handleRequestedCase( request ) {
                if(currentState == state.IDLE) {
                    if( request == receivedCase.NORMAL ) console.log( "Status: NORMAL");
                    else if( request == receivedCase.CALLFORHELP ) {
                        $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: "Coming" } ); 
                        console.log( "Status: Call For Help" );
                        record.CALLFORHELP++;
                    }
                    else if( request == receivedCase.NEEDJANITOR ) {
                        $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: "Please wait" } ); 
                        console.log( "Status: Need Janitor");
                        record.NEEDJANITOR++;
                    }
                    else if( request == receivedCase.NEEDREPAIRATION ) {
                        $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: "Please wait" } ); 
                        console.log( "Status: Need Maintainance" );
                        record.NEEDREPAIRATION++;
                    }
                    else if( request == receivedCase.DETECTGAS ) {
                        $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: "Gas Detected " } ); 
                        console.log( "Status: Gas Detected" );
                    }
                    else if( request == receivedCase.DETECTSOUND ) {
                        $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: "Sound Detected " } ); 
                        console.log( "Status: Sound Detected" );
                    }
                    if( request != receivedCase.NORMAL ) {
                        $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: "/clear" } ); 
                        $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: "STANDBY" } ); 
                        currentState = state.WORKINPROGRESS;
                        $("#status").html = "WORKING...";
                        $("#status").html.className = "label label-warning";
                        
                        clearInterval( refresher );
                    }
                    handleReceivedRequest( request );
                } else {
                    if( request == receivedCase.DONE ) {
                        console.log( "Case closed" );
                        currentState = state.IDLE;
                        var refresher = setInterval( refresh, 5000 );
                        $.post( "http://exceed.cupco.de/iot/ZeedDown/board", { data: receivedCase.NORMAL } );
                    } //console.log("WTF");
                }
            }
            
            function refresh() {
                $.get( "http://exceed.cupco.de/iot/ZeedDown/board", 
                    function( data ) { 
                        receivedData = data;
                        console.log( "Data: "+receivedData+" Transfer Complete");
                        handleRequestedCase( receivedData );
                    } );
            }
            
            function sendCallForHelp() {
                $.post( "http://exceed.cupco.de/iot/ZeedDown/board", { data: receivedCase.CALLFORHELP } ); 
            }
            
            function sendNeedJanitor() {
                $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: receivedCase.NEEDJANITOR } ); 
            }
            
            function sendNeedRepairation() {
                $.post( "http://exceed.cupco.de/iot/ZeedDown/web", { data: receivedCase.NEEDREPAIRATION } ); 
            }
            
            function sendCompletion() {
                console.log( "Case closed" );
                currentState = state.IDLE;
                $.post( "http://exceed.cupco.de/iot/ZeedDown/board", { data: receivedCase.NORMAL } ); 
            }
            
            $("#re1").click(sendCallForHelp);
            $("#re2").click(sendNeedJanitor);
            $("#re3").click(sendNeedRepairation);
            $("#re4").click(sendCompletion);
            
            button.click( onClicked ); 
            var refresher = setInterval( refresh, 5000 );
            
        </script>
   
    <!-- Bootstrap Core JavaScript -->
    <script src="js/bootstrap.min.js"></script>

    <!-- Plugin JavaScript -->
    <script src="http://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.3/jquery.easing.min.js"></script>

    <!-- Contact Form JavaScript -->
    <script src="js/jqBootstrapValidation.js"></script>
    <script src="js/contact_me.js"></script>

    <!-- Custom Theme JavaScript -->
    <script src="js/agency.js"></script>

</body>

</html>
